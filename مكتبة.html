<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø´ØºÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            direction: rtl;
            background-color:#;
            outline:none
        }

        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            animation: fadeIn 1s;
            outline:none
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        h1 {
            color:#8792ae; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ */
            font-weight: bold;
            animation: slideIn 1s;
        }

        @keyframes slideIn {
            from { transform: translateX(-100px); }
            to { transform: translateX(0); }
        }

        label {
            display: block;
            margin-bottom: 10px;
            color:#; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ */
        }

        select, button {
            margin: 10px;
            padding: 5px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            transition: all 0.3s ease;
            outline:none
        }

        select:hover, button:hover {
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }

        button {
            background-color:#8792ae; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± ÙØ§ØªØ­ */
            color: white;
            cursor: pointer;
            outline:none
        }

        button:hover {
            background-color:#aebad2; /* Ù„ÙˆÙ† Ø£Ø®Ø¶Ø± ØºØ§Ù…Ù‚ */
        }

        audio {
            margin-top: 20px;
            width: 80%;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            outline:none
        }

        .error-message {
            color: red;
            font-size: 14px;
            margin-bottom: 10px;
            outline:none
        }

        /* Ø¥Ø¶Ø§ÙØ© Ø¨Ø¹Ø¶ Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª */
        .container {
            transition: all 0.3s ease;
        }

        .container:hover {
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>Ù…Ø´ØºÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</h1>

        <label>Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦:</label>
        <select id="qariSelect"></select>

        <label>Ø§Ø®ØªØ± Ø§Ù„Ø³ÙˆØ±Ø©:</label>
        <select id="suraSelect"></select>

        <button onclick="playSura()">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©</button>

        <audio id="audioPlayer" controls></audio>

        <div id="errorMessage" class="error-message"></div>

        <button id="backButton" onclick="goBack()">Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    </div>

    <script>
        const qariSelect = document.getElementById("qariSelect");
        const suraSelect = document.getElementById("suraSelect");
        const audioPlayer = document.getElementById("audioPlayer");
        const errorMessage = document.getElementById("errorMessage");

        // ğŸ”¹ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡
        async function fetchQaris() {
            try {
                const response = await fetch("https://mp3quran.net/api/v3/reciters");
                const data = await response.json();
                data.reciters.forEach(qari => {
                    const option = document.createElement("option");
                    option.value = qari.id;
                    option.textContent = qari.name;
                    qariSelect.appendChild(option);
                });
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡:", error);
                errorMessage.textContent = "Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ø±Ø§Ø¡";
            }
        }

        // ğŸ”¹ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±
        async function fetchSuras() {
            try {
                const response = await fetch("https://api.quran.com/api/v4/chapters");
                const data = await response.json();
                data.chapters.forEach(sura => {
                    const option = document.createElement("option");
                    option.value = sura.id;
                    option.textContent = `${sura.id} - ${sura.name_arabic}`;
                    suraSelect.appendChild(option);
                });
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±:", error);
                errorMessage.textContent = "Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙˆØ±";
            }
        }

        // ğŸ”¹ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø© Ù„Ù„Ù‚Ø§Ø±Ø¦ Ø§Ù„Ù…Ø­Ø¯Ø¯
        async function playSura() {
            const qariId = qariSelect.value;
            const suraId = suraSelect.value;
            if (!qariId || !suraId) {
                errorMessage.textContent = "Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù‚Ø§Ø±Ø¦ ÙˆØ§Ù„Ø³ÙˆØ±Ø©";
                return;
            }

            // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø§Ø±Ø¦ Ù„Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØª
            try {
                const response = await fetch(`https://mp3quran.net/api/v3/reciters?reciter=${qariId}`);
                const data = await response.json();
                const reciter = data.reciters.find(r => r.id == qariId);

                if (reciter && reciter.moshaf.length > 0) {
                    const suraNumber = String(suraId).padStart(3, '0'); // ØªØ­ÙˆÙŠÙ„ Ø±Ù‚Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ø¥Ù„Ù‰ 3 Ø£Ø±Ù‚Ø§Ù… (Ù…Ø«Ø§Ù„: 001ØŒ 002)
                    const baseUrl = reciter.moshaf[0].server; // Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù‚Ø§Ø±Ø¦
                    const audioUrl = `${baseUrl}${suraNumber}.mp3`; // ØªÙƒÙˆÙŠÙ† Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØª

                    audioPlayer.src = audioUrl;
                    audioPlayer.play();
                    errorMessage.textContent = "";
                } else {
                    errorMessage.textContent = "Ø¹Ø°Ø±Ù‹Ø§ØŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ³Ø¬ÙŠÙ„ Ù„Ù‡Ø°Ù‡ Ø§Ù„Ø³ÙˆØ±Ø© Ù…Ø¹ Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø§Ø±Ø¦.";
                }
            } catch (error) {
                console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©:", error);
                errorMessage.textContent = "Ø®Ø·Ø£ ÙÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ø³ÙˆØ±Ø©";
            }
        }

        // Function to go back to look.html
        function goBack() {
            window.location.href = "index.html";
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
        fetchQaris();
        fetchSuras();
    </script>

</body>
</html>
